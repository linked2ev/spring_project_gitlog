<!DOCTYPE HTML>
<!--[if IE 8]><html class="ie8" lang="ko"><![endif]-->
<!--[if gt IE 8]><!--><html lang="ko"><!--<![endif]-->

<head>
	<title>R&amp;D 패널 관리 시스템</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>	
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<link rel="shortcut icon" href="../images/favi/favicon.ico" type="image/x-icon"/>
	<link rel="apple-touch-icon-precomposed" href="../images/favi/favicon57.png"/>
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../images/favi/favicon114.png"/>

	<!--[if lt IE 9]><script src="../js/html5shiv.min.js"></script><![endif]-->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!-- _____________Grid_____________ -->
<script src="http://code.jquery.com/jquery-latest.min.js"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

<!-- jquery-custom-ui style css -->
<link rel="stylesheet" type="text/css" media="screen" href="../../common/lib/jqGrid/custom/jquery-ui.css" />

<!-- jquery-ui style css -->
<link rel="stylesheet" type="text/css" media="screen" href="../../common/lib/jqGrid/custom/ui.jqgrid.css" />
<link rel="stylesheet" type="text/css" media="screen" href="../../common/lib/jqGrid/custom/ui.jqgrid-bootstrap.css" />
<link rel="stylesheet" type="text/css" media="screen" href="../../common/lib/jqGrid/custom/ui.jqgrid-bootstrap-ui.css" />

<link rel="stylesheet" type="text/css" media="screen" href="../../common/lib/jqGrid/plugins/ui.multiselect.css" />
<link rel="stylesheet" type="text/css" media="screen" href="../../common/lib/jqGrid/plugins/searchFilter.css" />

<link rel="stylesheet" href="../css/panel_style.css" type="text/css">
 
<script src="../../common/lib/jqGrid/js/jquery-1.11.0.min.js"></script>
<script src="../../common/lib/jqGrid/js/jquery-ui.js"></script>

<script src="../../common/lib/jqGrid/js/grid.locale-kr.js"></script>
<script src="../../common/lib/jqGrid/js/jquery.jqGrid.js"></script>
<script src="../../common/lib/jqGrid/plugins/ui.multiselect.js"></script>
<script src="../../common/lib/jqGrid/js/jquery.jqGrid.min.js"></script>
<script src="../../common/lib/jqGrid/plugins/jquery.tablednd.js"></script>
<script src="../../common/lib/jqGrid/plugins/jquery.contextmenu.js"></script>
<script src="../../common/lib/jqGrid/plugins/jquery.searchFilter.js"></script>
<script src="../../common/lib/jqGrid/src/grid.celledit.js"></script>

<script src="../../common/lib/jqGrid/custom/ui-custom.js"></script>

<script>
	$.jgrid.no_legacy_api = true;
	$.jgrid.useJSON = true;
	
// 	$.jgrid.defaults.width = 1000;
	$.jgrid.defaults.responsive = true;
	//$.jgrid.defaults.styleUI = 'Bootstrap';
</script>
</head>

<body>


<!-- main -->
<main id="main" class="main respWidth">
	<div class="containerWrap">
		<div class="pageWrap rndRecrRegstInside">
			<div class="page-title">
				<h2>시험 모집공고 등록</h2>
			</div>
			<div class="page-content respMobile">
				<div class="respMobile-alert"><span>해당 업무는 PC와 태블릿을 이용해 주세요.</span></div>
			</div>
			<div class="page-content respPC">

				<div class="tblWrap tbl-wm">
					<table>
						<caption>시험 모집공고 등록 테이블</caption>
						<colgroup>
							<col width="18%">
							<col width="82%">
						</colgroup>
						<tbody>
							<tr>
								<th>시험제목</th>
								<td>
									<input type="text" id="searchExamTitle" name="searchExamTitle" class="inputBox">
								</td>
							</tr>
							<tr>
								<th>시험관리코드</th>
								<td>
									<input type="text" id="searchExamCode" name="searchExamCode" class="inputBox" style="width:280px;" placeholder="직접입력">
								</td>
							</tr>
							<tr>
								<th>시험구분</th>
								<td>
									<select id="searchTeamGbn" name="searchTeamGbn" class="inputBox" style="width:140px;">
	                                    <option value="01" >
	                                                01-효능</option>
	                                        <option value="02" >
	                                                02-안정성</option>
	                                        <option value="03" >
	                                                03-향</option>
	                                        <option value="04" >
	                                                04-센서리</option>
	                                        </select>																		
								</td>
							</tr>
							<tr>
								<th>중복참여</th>
								<td>
									<select id="searchDupApp" name="searchDupApp" class="inputBox" style="width:140px;">
										<option value="01">불가</option>
										<option value="02">가능</option>
									</select>											
								</td>
							</tr>
							<tr>
								<th>신청기간</th>
								<td>
									<div class="divForm">
										<div class="inputBoxDate" style="width:140px;">
											<input type="text" id="searchAppPeriodFromDate" name="searchAppPeriodFromDate" class="inputBox datepicker s-datepicker">
										</div>
										<select id="searchAppPeriodFromTime" name="searchAppPeriodFromTime" class="inputBox" style="width:140px;">
		                                    <option value="0000" >
		                                                00:00</option>
		                                        <option value="0100" >
		                                                01:00</option>
		                                        <option value="0200" >
		                                                02:00</option>
		                                        <option value="0300" >
		                                                03:00</option>
		                                        <option value="0400" >
		                                                04:00</option>
		                                        <option value="0500" >
		                                                05:00</option>
		                                        <option value="0600" >
		                                                06:00</option>
		                                        <option value="0700" >
		                                                07:00</option>
		                                        <option value="0800" >
		                                                08:00</option>
		                                        <option value="0900" >
		                                                09:00</option>
		                                        <option value="1000" >
		                                                10:00</option>
		                                        <option value="1100" >
		                                                11:00</option>
		                                        <option value="1200" >
		                                                12:00</option>
		                                        <option value="1300" >
		                                                13:00</option>
		                                        <option value="1400" >
		                                                14:00</option>
		                                        <option value="1500" >
		                                                15:00</option>
		                                        <option value="1600" >
		                                                16:00</option>
		                                        <option value="1700" >
		                                                17:00</option>
		                                        <option value="1800" >
		                                                18:00</option>
		                                        <option value="1900" >
		                                                19:00</option>
		                                        <option value="2000" >
		                                                20:00</option>
		                                        <option value="2100" >
		                                                21:00</option>
		                                        <option value="2200" >
		                                                22:00</option>
		                                        <option value="2300" >
		                                                23:00</option>
		                                        </select>	
										&nbsp;~&nbsp;
										<br class="br-mobile">
										<div class="inputBoxDate" style="width:140px;">
											<input type="text" id="searchExamPeriodToDate" name="searchExamPeriodToDate" class="inputBox datepicker e-datepicker">
										</div>
										<select id="searchExamPeriodToTime" name="searchExamPeriodToTime" class="inputBox" style="width:140px;">
		                                    <option value="0000" >
		                                                00:00</option>
		                                        <option value="0100" >
		                                                01:00</option>
		                                        <option value="0200" >
		                                                02:00</option>
		                                        <option value="0300" >
		                                                03:00</option>
		                                        <option value="0400" >
		                                                04:00</option>
		                                        <option value="0500" >
		                                                05:00</option>
		                                        <option value="0600" >
		                                                06:00</option>
		                                        <option value="0700" >
		                                                07:00</option>
		                                        <option value="0800" >
		                                                08:00</option>
		                                        <option value="0900" >
		                                                09:00</option>
		                                        <option value="1000" >
		                                                10:00</option>
		                                        <option value="1100" >
		                                                11:00</option>
		                                        <option value="1200" >
		                                                12:00</option>
		                                        <option value="1300" >
		                                                13:00</option>
		                                        <option value="1400" >
		                                                14:00</option>
		                                        <option value="1500" >
		                                                15:00</option>
		                                        <option value="1600" >
		                                                16:00</option>
		                                        <option value="1700" >
		                                                17:00</option>
		                                        <option value="1800" >
		                                                18:00</option>
		                                        <option value="1900" >
		                                                19:00</option>
		                                        <option value="2000" >
		                                                20:00</option>
		                                        <option value="2100" >
		                                                21:00</option>
		                                        <option value="2200" >
		                                                22:00</option>
		                                        <option value="2300" >
		                                                23:00</option>
		                                        </select>	
									</div>
								</td>
							</tr>
							<tr>
								<th>시험일자</th>
								<td>
									<div class="inputBoxDate" style="width:140px;">
										<input type="text" id="searchExamPeriodFrom" name="searchExamPeriodFrom"  class="inputBox datepicker s-datepicker">
									</div>
									&nbsp;~&nbsp;
									<div class="inputBoxDate" style="width:140px;">
										<input type="text" id="searchExamPeriodTo" name="searchExamPeriodTo"  class="inputBox datepicker e-datepicker">
									</div>								
								</td>
							</tr>
							<tr>
								<th>모집인원</th>
								<td>
									<select id="searchRercuitWayCD" name="searchRercuitWayCD" class="inputBox wd100" style="width:140px;">
	                                    <option value="01" >
	                                                선착순</option>
	                                        <option value="02" >
	                                                기간종료일</option>
	                                        </select>			
									<input type="text" id="searchRecruitNum" name="searchRecruitNum" class="inputBox" style="width:80px;">&nbsp;명						
								</td>
							</tr>
							<tr>
								<th>예비패널</th>
								<td>
									<input type="text" id="searchReserveNum" name="searchReserveNum" class="inputBox" style="width:80px;">&nbsp;명
								</td>
							</tr>
							<tr>
								<th>패널타입</th>
								<td><button type="button" class="btn btn-5th btn-blue">공고 패널 선택</button></td>
							</tr>
							<tr>
								<th>시험방식</th>
								<td>
									<select id="searchExamWay" name="searchExamWay" class="inputBox" style="width:140px;">
	                                    <option value="01" >
	                                                방문</option>
	                                        <option value="02" >
	                                                온라인</option>
	                                        </select>	
									<!-- 방문 -->
									<select id="searchVisitArea" name="searchVisitArea" class="inputBox" style="width:140px;">
	                                    <option value="01" >
	                                                서울</option>
	                                        <option value="02" >
	                                                용인</option>
	                                        </select>	
									<input type="text" id="searchVisitAreaOther" name="searchVisitAreaOther" class="inputBox" style="width:200px;" placeholder="방문 장소 직접 입력">
									
									<!-- 온라인 -->
									<select id="SearchOnline" name="SearchOnlineSurvey" class="inputBox" style="width:163px;">
	                                    <option value="01" >
	                                                Daily 설문작성</option>
	                                        <option value="02" >
	                                                특정일 설문작성</option>
	                                        </select>
								</td>
							</tr>
							<tr>
								<th>방문일자</th>
								<td>
									<div class="tbl-reset">
										<div class="btn-wrap">
											<button type="button" class="btn btn-4th btn-gold addDisp">차수추가</button>
											<button type="button" class="btn btn-4th btn-gold delDisp">차수삭제</button>
											<button type="button" class="btn btn-4th btn-gold copyDisp">차수복사</button>
										</div>
										<!-- Grid Area -->
										<table id="jqGrid" class="tbl-in-tbl visit-grid01"></table>
									</div>
								</td>
							</tr>
							<tr>
								<th>시험개요</th>
								<td>
									<div style="height:250px;border:1px solid #d0d0d0;">에디터<!-- 에디터 입힐 때 삭제 하세요~ --></div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="btn-wrap btnC">
					<button type="button" class="btn btn-prim btn-white wd50">목록</button>
					<button type="button" class="btn btn-prim btn-red wd50">저장</button>
				</div>

			</div><!-- // page-content -->
		</div><!-- // pageWrap -->
	</div><!-- // container -->
</main>
<!-- // main -->

<script>
$(function(){

	// 시험방식 변경
	var searchExamWay = "";
	//방문이나 디폴트
	if(searchExamWay == "01" || searchExamWay == ""){
		$("#searchVisitArea").show();
		$("#searchVisitAreaOther").show();
		
		$("#SearchOnline").hide();
	}
	//온라인
	else{
		$("#SearchOnline").show();

		$("#searchVisitArea").hide();
		$("#searchVisitAreaOther").hide();
	}

    // 시험방식 변경 이벤트
    $(document).on("change", "select[name='searchExamWay']", function () {
		//방문
    	if($("select[name='searchExamWay']").val() == '01'){
    		$("#searchVisitArea").show();
    		$("#searchVisitAreaOther").show();
    		
    		$("#SearchOnline").hide();
    	}
		//온라인
    	else{
    		$("#SearchOnline").show();

    		$("#searchVisitArea").hide();
    		$("#searchVisitAreaOther").hide();
    	}
    });

	// 조회 버튼 클릭 이벤트
    $(document).on("click", "#searchPc", function () {
        var $searchForm = $("#searchForm");
        
        $searchForm.attr({"action":"/bo/tm/testAnnounceAddForm.do", "target":"_self", "method":"post"}).submit();
    });
	
	
	// btn Css
	$(".jqgrid_btn").button();
	
	// ------ jqGrid-common.js ------
	var inputBoxElment = 
		{
		"text":  
			 function (cellvalue, options, rowObject){
			
	    	    var rowId = options.rowId;
	    	    var name = options.colModel.name;
	    	    var str = "<input type='text' class='inputBox fm_input_text' id='"+ rowId +"_"+ name +"' name='"+ name +"' value='' class='inputBox'>";
	    	 
	    	    return str;
			}
		,
		"number": 
			function (cellvalue, options, rowObject){
	    	    var rowId = options.rowId;
	    	    var name = options.colModel.name;
	    	    var str = "<input type='text' class='inputBox txtR fm_input_number' id='"+ rowId +"_"+ name +"' name='"+ name +"' value='' style='width:66px'> 원";
	    	 
	    	    return str;
			}
		,
		"checkbox":
	        function (cellvalue, options, rowObject){
	    	    var rowId = options.rowId;
	    	    var name = options.colModel.name;
	    	    var str = "<input type='checkbox' class='fm_input_checkbox' id='"+ rowId +"_"+ name +"' name='"+ name +"' value='Y'><label for='"+ rowId +"_"+ name +"' class='screen-out'></label>";
	    	 
	    	    return str;
	    	}
		,
		"visitday":
	        function (cellvalue, options, rowObject){
	    	    var rowId = options.rowId;
	    	    var name = options.colModel.name;
	    	    
	    	    //var str = "<input type='text' class='fm_input_checkbox datepicker s-datepicker' id='"+ rowId +"_"+ name +"' name='"+ name +"'>";
		    	var str = "";
	    	    str += "<ul class='fm_ul_visitday' id='fm_ul_visitday_"+ rowId + "'>"
	    	    str +=     "<li id='fm_li_visitday_"+ rowId + "_0' data-liCntId='0' class='txtL'>"
	    	    str += 	       "<div class='inputBoxDate' style='width:115px;'><input type='text' class='inputBox datepicker' id='visitday_"+ rowId +"_0' name='visitday_"+ rowId +"' value='' data-dtPickerId='dtPicker_0'></div>  ";
				str += 		   "<select class='inputBox' style='width:80px;'>";
	    	   	str +=             "<option value='10:00'>10:00</option>";
	    	   	str +=             "<option value='11:00'>11:00</option>";
	    	   	str +=         "</select> ~ ";
	    	    str +=         "<select class='inputBox' style='width:80px;'>";
	    	   	str +=             "<option value='10:00'>10:00</option>";
	    	   	str +=             "<option value='11:00'>11:00</option>";
	    	   	str +=         "</select>  ";
	    	    //str += "<input type='text' id='sTime_"+ rowId +"' name='sTime_"+ rowId +"' style='width:60px;'> ~ ";  
	    	    //str += "<input type='text' id='eTime"+ rowId +"' name='eTime"+ rowId +"' style='width:60px;'>  ";
	    	    str +=          "<input type='text' id='people_"+ rowId +"' name='people_"+ rowId +"' value='' style='width:30px;' class='inputBox'> 명";
	    	    str +=     "</li>"
	    	    str += "</ul>";
	    	    
	    	    return str;
	    	}
		,
		"delRowBtn":
			function (cellvalue, options, rowObject){
	    	    var rowId = options.rowId;
	    	    //var name = options.colModel.name;
	    	    
	    	    $ul = $("#fm_ul_delRowBtn_"+rowId);
				$liLength = $ul.find("li").length;
			
 	    		var str = "";
	    	    str += "<ul class='fm_ul_delRowBtn' id='fm_ul_delRowBtn_"+ rowId + "'>"
	    	    str +=     "<li id='fm_li_delRowBtn_"+ rowId + "_0'>"
	    	    str +=	       "<button class='btn btn-icon btn-blue delRow' data-delRowId='"+ rowId +"_0'><i class='ico minus'></i><span class='screen_out'>삭제</span></button>";
	    	    str +=     "</li>"
	    	    str += "</ul>";
		    	    
	    	    return str;
			}
		,
		"addRowBtn":
			function (cellvalue, options, rowObject){
	    	    var rowId = options.rowId;
	    	    //var name = options.colModel.name;
	    	    
	    	    $ul = $("#fm_ul_addRowBtn_"+rowId);
				$liLength = $ul.find("li").length;
			
 	    		var str = "";
	    	    str += "<ul class='fm_ul_addRowBtn' id='fm_ul_addRowBtn_"+ rowId + "'>"
	    	    str +=     "<li id='fm_li_addRowBtn_"+ rowId + "_0'>"
	    	    if($liLength<1){
    	    	str +=	       "<button class='btn btn-icon btn-blue addRow' id="+ rowId +"><i class='ico plus'></i><span class='screen_out'>추가</span></button>";
	    	    } 
	    	    str +=     "</li>"
	    	    str += "</ul>";
		    	    
	    	    return str;
			}
		};
	
	
	// ------------------------------
	
	// grid 생성
	$("#jqGrid").jqGrid({
// 	    caption: 'jqGridCustomizing_ver3.0',  // caption : 그리드의 제목을 지정
	    //mtype: 'post',                      // mtype : 데이터 전송방식을 지정한다.
        //data: employeeData.employeeList,
        datatype: 'local',
        colNames: ['차수','방문일자', '시험비용', '수령증', '결과설문', '', '행추가'],
        colModel: [
            {
           	    //hidden : true,      // 컬럼 hidden 설정
			    label: '차수',
                name: 'test1',  
                align: 'center',      
                title : false,     
                //editable: false,     
                resizable: false,
                width: 20,
			    key: true
            },
            {
			    label : '방문일자',
                name: 'test2',
                align: 'center',
                width: 200,
                // formatter customizing
                formatter: inputBoxElment.visitday 
            },
            {
			    label : '시험비용',
                name: 'test3',
                align: 'center',
                width: 60,
                // formatter customizing
                formatter: inputBoxElment.number 
            },
            {  
          	    label : '수령증', 
                name: 'test4',
                align: 'center',
                width: 30,
                // formatter customizing
                formatter: inputBoxElment.checkbox
            },
            {
			    label : '결과설문',
                name: 'test5',
                align: 'center',
                width: 30,
                // formatter customizing
                formatter: inputBoxElment.checkbox
            },
            // --- Row Editing Column Setting ---
            {
			    label: '행삭제',
                name: 'delete',
                align: 'center',
                width: 30,
                // formatter customizing
                formatter: inputBoxElment.delRowBtn
            },
            {
			    label: '행추가',
                name: 'add',
                align: 'center',
                width: 30,
                // formatter customizing
                formatter: inputBoxElment.addRowBtn
            },
            // ----------------------------------
        ],


        // grid 작업 완료 시 발생
	    gridComplete: function() { 
            // console.log($(this).children().find("td").attr("aria-describedby", ".jqGrid_toDay") );
		    //$(this).children().find("td").attr("aria-describedby", ".jqGrid_toDay").addClass('_toDay');
		    
		    // datepicker 설정 함수
	    	$(".datepicker").datepicker();
	    },
           // 데이터 로드 실패시 실행되는 부분
           loadError: function(xhr, status, error) {
              alert("error: " + error);
 	    }, 
        multiselect : true,        // multiselect: row 다중 체크박스 여부
	    //cellEdit: true,          // cellEdit: 셀 수정 기능을 사용하려면 true
	    //onSelectRow: editRow,    // the javascript function to call on row click. will ues to to put the row in edit mode
        //width: 780,                // width: 넓이
        autowidth:true,
        height: 200               // height: 높이
    });
	
	var newWidth = $("#jqGrid_delete").width() + $("#jqGrid_add").outerWidth(true);
	$("#jqGrid").jqGrid("setLabel", "delete", "", "", {
	        style: "width: " + newWidth + "px;",
	        colspan: "2"
	    });
	$("#jqGrid").jqGrid("setLabel", "add", "", "", {style: "display: none"}); 
  
	/*
	* rowID - (string) the value of the id of the new added row
    * initdata - (object) the object of the pair name:value where the name correspond to the name in colMode. When set this is the initial value of the the cell.
    * position - (string) determines the position of the new adde row in the grid. Default is first. Can have a value last to be added at the last position
    * useDefValues - (boolean) if set to true uses the defaultValue property in editoptions of the colModel
    * useFormatter : (boolean) if set to true synchronises the parameters from the formatter actions
    * addRowParams : (object) parameters which are passed to the addRow - they are the same as of editRow
	*/
	// 차수 추가 이벤트
	$(document).on("click", ".addDisp", function(){
	    var parameters = { 
            //rowid : undefined, 
            //initdata : {}, 
            position :"last", 
            //useDefValues : false, 
            //useFormatter : false, 
            //addRowParams : {extraparam:{}}
	    };
	    $("#jqGrid").jqGrid('addRow', parameters); 
	    
	    // 차수 정렬 함수 호출  
	    sortDsip();
	});  
 
	// 차수 삭제 이벤트 
	$(document).on("click",".delDisp ", function(){ 
		var result = confirm("정말 차수 행을 삭제하시겠습까?"); 
		if(result) {  
			 
			var rowId = $(this).attr("data-rowId");
			$("#jqGrid").delRowData(rowId);
			
			// 차수 정렬 함수 호출 
			sortDsip();
		}
	});
	
	// 차수 복사 이벤트
	$(document).on("click", ".copyDisp", function(){
		
		var rowIds = $("#jqGrid").jqGrid("getGridParam","selarrrow");  
		if(rowIds.length != 1){
			alert("복사 할 차수 행 하나를 선택해주세요.");
			return;
		}
		
		// 차수 행 추가
	    var parameters = { 
	            position :"last", 
	            useFormatter : true, 
		    };
	    $("#jqGrid").jqGrid('addRow', parameters); 
	    
	    
    	var liLength = $("#fm_ul_visitday_"+ rowIds[0]).find("li").length;
    	var rowId = $("#jqGrid").find("tbody > tr.jqgrow:last").attr("id");	
    	var fmStr = "";

    	for(var i=1; i<liLength; i++){

			// 해당 차수 ul
			$ul = $("#fm_ul_visitday_"+ rowId);
			liCntId = parseInt($ul.find("li").last().attr("data-liCntId")) + 1;
			
			fmStr +=     "<li id='fm_li_visitday_"+ rowId + "_"+ liCntId +"' data-liCntId='"+ liCntId +"'>"
			fmStr += 	     "<input type='text' class='datepicker' id='visitday_"+ rowId +"_"+ liCntId +"' name='visitday_"+ rowId +"'>  ";
			fmStr += 		 "<select>";
			fmStr +=             "<option value='10:00'>10:00</option>";
			fmStr +=             "<option value='11:00'>11:00</option>";
			fmStr +=         "</select> ~ ";
			fmStr +=         "<select>";
			fmStr +=             "<option value='10:00'>10:00</option>";
			fmStr +=             "<option value='11:00'>11:00</option>";
			fmStr +=         "</select>  ";
			fmStr +=         "<input type='text' id='people_"+ rowId +"' name='people_"+ rowId +"' style='width:40px;'> 명";
			fmStr +=     "</li>"
			
			$ul.append(fmStr); 
			fmStr = "";
			$ul.children().find("#visitday_"+rowId+"_"+liCntId).datepicker();
			
			
			// 행 삭제 버튼 생성
			$ul = $("#fm_ul_delRowBtn_"+ rowId);
	   	    
			fmStr +=     "<li id='fm_li_delRowBtn_"+ rowId + "_"+ liCntId +"'>"
			fmStr +=         "<button class='delRow' id='' data-delRowId='"+ rowId +"_"+ liCntId +"'>삭제</button>";
			fmStr +=     "</li>"
			
			$ul.append(fmStr);
			fmStr = "";
		}
		
		
	    // 복사 할 행 obj
  		var $tr        = $("#"+rowIds[0]); 
		var $text      = $tr.find("td").find("input:text");
		var $checkbox  = $tr.find("td").find("input:checkbox");
		var $select    = $tr.find("td").find("select");
	    
		// 추가 할 행 obj
	    var lastRowId = $("#jqGrid").find("tbody > tr.jqgrow:last").attr("id");	
	    var _$tr       = $("#"+lastRowId); 
		var _$text     = _$tr.find("td").find("input:text");
		var _$checkbox = _$tr.find("td").find("input:checkbox");
		var _$select   = _$tr.find("td").find("select");

		// 데이터 바인딩
		for(var i=0; i<_$text.length; i++){
			_$text[i].value = $text[i].value;
		}
		// multiselectBox는 제외
		for(var i=1; i<_$checkbox.length; i++){
			if($checkbox[i].checked == true){
				_$checkbox[i].checked = true;
			}
		}
		for(var i=0; i<_$select.length; i++){
			_$select[i].value = $select[i].value;
		}
		
		// 차수 정렬 함수 호출 
	    sortDsip();
	});
	
	// 차수 정렬 이벤트
	function sortDsip(){
		//var reccount = $("#jqGrid").getGridParam("reccount") + 1;  // reccount: 현재 테이블 행 갯수
		
	    var rowIds = $("#jqGrid").jqGrid('getDataIDs');
	    for(var i=0; i<=rowIds.length; i++){
	    	$("#jqGrid").jqGrid("setCell", rowIds[i], 'test1', i+1);
	    }
	    
	    // * multiselect unchecked
	    $("#jqGrid").jqGrid("resetSelection");
	}
        
	// 행 추가 이벤트 (방문일자)
	$(document).on("click", ".addRow", function(){
		
		var rowId = $(this).attr("id");
		
		var $ul;
		var liCntId;
		var fmStr = "";
			
		// 해당 차수 ul
		$ul = $("#fm_ul_visitday_"+ rowId);
		liCntId = parseInt($ul.find("li").last().attr("data-liCntId")) + 1;
		
		fmStr +=     "<li id='fm_li_visitday_"+ rowId + "_"+ liCntId +"' data-liCntId='"+ liCntId +"'>"
		fmStr += 	     "<input type='text' class='datepicker' id='visitday_"+ rowId +"_"+ liCntId +"' name='visitday_"+ rowId +"'>  ";
		fmStr += 		 "<select>";
		fmStr +=             "<option value='10:00'>10:00</option>";
		fmStr +=             "<option value='11:00'>11:00</option>";
		fmStr +=         "</select> ~ ";
		fmStr +=         "<select>";
		fmStr +=             "<option value='10:00'>10:00</option>";
		fmStr +=             "<option value='11:00'>11:00</option>";
		fmStr +=         "</select>  ";
		fmStr +=         "<input type='text' id='people_"+ rowId +"' name='people_"+ rowId +"' style='width:40px;'> 명";
		fmStr +=     "</li>"
		
		$ul.append(fmStr); 
		fmStr = "";
		$ul.children().find("#visitday_"+rowId+"_"+liCntId).datepicker();
		
		
		// 행 삭제 버튼 생성
		$ul = $("#fm_ul_delRowBtn_"+ rowId);
   	    
		fmStr +=     "<li id='fm_li_delRowBtn_"+ rowId + "_"+ liCntId +"'>"
		fmStr +=         "<button class='delRow' id='' data-delRowId='"+ rowId +"_"+ liCntId +"'>삭제</button>";
		fmStr +=     "</li>"
		
		$ul.append(fmStr);
		fmStr = "";
		
	    //sortDsip();
	});
	
	// 행 삭제 이벤트 (방문일자)
	$(document).on("click", ".delRow", function(){
 		var result = confirm("정말 차수 행을 삭제하시겠습까?"); 
		if(result) {  
			var $delRowId = $(this).attr("data-delRowId");
			$("#fm_li_visitday_"+ $delRowId).remove();
			$("#fm_li_delRowBtn_"+ $delRowId).remove();
		}
	});
});
</script>

</body>
</html>